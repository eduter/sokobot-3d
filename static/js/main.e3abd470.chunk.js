(this["webpackJsonpsokobot-3d"]=this["webpackJsonpsokobot-3d"]||[]).push([[0],{103:function(e,t,n){e.exports=n(126)},126:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"selectLevel",(function(){return J})),n.d(r,"clearLevel",(function(){return X}));var o={};n.r(o),n.d(o,"getSelectedLevel",(function(){return q})),n.d(o,"isUnlocked",(function(){return $})),n.d(o,"getNextLevel",(function(){return Q}));var a={};n.r(a),n.d(a,"startLevel",(function(){return ne})),n.d(a,"finishLevel",(function(){return re})),n.d(a,"moveForward",(function(){return oe})),n.d(a,"moveBackward",(function(){return ae})),n.d(a,"turnRight",(function(){return ce})),n.d(a,"turnLeft",(function(){return ie})),n.d(a,"move",(function(){return le}));var c={};n.r(c),n.d(c,"getRobotPosition",(function(){return he})),n.d(c,"getRobotDirection",(function(){return be})),n.d(c,"getRobotKey",(function(){return ge})),n.d(c,"getMapDimensions",(function(){return fe})),n.d(c,"getTilesInfo",(function(){return me})),n.d(c,"getMovableObjectsInfo",(function(){return ve})),n.d(c,"isLevelCleared",(function(){return de}));var i={};n.r(i),n.d(i,"toggleOnScreenControls",(function(){return ye}));var l={};n.r(l),n.d(l,"displayOnScreenControls",(function(){return Le}));var s,u,h,b=n(0),g=n.n(b),f=n(41),m=n.n(f),v=n(145),d=n(144),j=n(75),p=n(32),E=n(45),O=n(19),y=n(29),L=n(9),S=n(5),T=n(7),w=n(6);!function(e){e.NORTH="NORTH",e.EAST="EAST",e.SOUTH="SOUTH",e.WEST="WEST"}(h||(h={}));var k=Math.PI/2,R={NORTH:{dx:0,dy:1,angle:0},WEST:{dx:-1,dy:0,angle:k},SOUTH:{dx:0,dy:-1,angle:2*k},EAST:{dx:1,dy:0,angle:3*k}},C=(s={},Object(w.a)(s,h.NORTH,h.EAST),Object(w.a)(s,h.EAST,h.SOUTH),Object(w.a)(s,h.SOUTH,h.WEST),Object(w.a)(s,h.WEST,h.NORTH),s),x=(u={},Object(w.a)(u,h.NORTH,h.WEST),Object(w.a)(u,h.WEST,h.SOUTH),Object(w.a)(u,h.SOUTH,h.EAST),Object(w.a)(u,h.EAST,h.NORTH),u);function _(e,t){var n=Object(T.a)(e,2),r=n[0],o=n[1],a=R[t];return[r+a.dx,o+a.dy]}function N(e){return C[e]}function M(e){return x[e]}function A(e){return C[C[e]]}function I(e,t){var n=Object(T.a)(t,2),r=n[0],o=n[1];return e[r]?e[r][o]:void 0}var V=function(e,t,n){var r=_(t,n),o=_(r,n);return[I(e,t),I(e,r),I(e,o)]};var H=function(e){var t=function(e){return e.objects.some((function(e){return"box"===e.type}))};return!e.targets.some((function(n){var r=Object(T.a)(n,2),o=r[0],a=r[1];return!t(e.tiles[o][a])}))&&!e.tiles.some((function(n,r){return n.some((function(n,o){return t(n)&&!e.targets.some((function(e){var t=Object(T.a)(e,2),n=t[0],a=t[1];return n===r&&a===o}))}))}))};function U(e){return void 0!==e&&e.height>0}var W=function(e,t,n){if(!U(t))return!1;if(t.height>e.height+e.objects.length)return!1;var r=e.height+e.objects.length;if(t.objects.slice(r-t.height).length>0){if(!U(n))return!1;if(n.height+n.objects.length>r)return!1}return!0};var D=function(e,t,n){var r=_(t,n),o=Object(T.a)(t,2),a=o[0],c=o[1],i=Object(T.a)(r,2),l=i[0],s=i[1],u=_(r,n),h=Object(T.a)(u,2),b=h[0],g=h[1],f=e[a][c],m=f.height+f.objects.length;return e.map((function(t,n){return t.map((function(t,r){if(n===l&&r===s)return Object(S.a)(Object(S.a)({},t),{},{objects:t.objects.slice(0,m-t.height)});if(n===b&&r===g){var o=e[l][s];return Object(S.a)(Object(S.a)({},t),{},{objects:[].concat(Object(L.a)(t.objects),Object(L.a)(o.objects.slice(m-o.height)))})}return t}))}))};var G,B=n(21),F=[{height:3,width:3,targets:[[1,2]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[{type:"box"}]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[1,0],direction:h.NORTH}},{height:4,width:5,targets:[[0,1],[4,0]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[{type:"box"}]},{height:0,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[{type:"box"}]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:0,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[2,0],direction:h.NORTH}},{height:5,width:5,targets:[[0,0],[4,4]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:0,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:2,objects:[]},{height:2,objects:[]},{height:1,objects:[{type:"box"},{type:"box"}]},{height:1,objects:[]}],[{height:1,objects:[]},{height:2,objects:[]},{height:2,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[2,2],direction:h.NORTH}},{height:3,width:5,targets:[[0,2],[4,2]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[{type:"box"}]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[2,0],direction:h.NORTH}},{height:6,width:5,tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]},{height:1,objects:[]},{height:2,objects:[]},{height:2,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]},{height:1,objects:[]},{height:2,objects:[{type:"box"}]},{height:2,objects:[]}],[{height:2,objects:[]},{height:2,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:2,objects:[{type:"box"}]},{height:2,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],targets:[[0,2],[0,3],[4,0],[4,5]],robot:{position:[2,0],direction:h.NORTH}}];function P(){return F.map((function(e,t){return"Level ".concat(t+1)}))}function K(e){var t=F[e];if(t)return function(e,t){var n=Object(T.a)(t.robot.position,2),r=n[0],o=n[1],a=t.tiles[r][o],c=a.height+a.objects.length;return Object(S.a)(Object(S.a)({},t),{},{robot:Object(S.a)(Object(S.a)({},t.robot),{},{key:z(e,r,o,c)}),tiles:t.tiles.map((function(t,n){return t.map((function(t,r){var o=t.height,a=t.objects;return{height:o,objects:a.map((function(t,a){return Object(S.a)(Object(S.a)({},t),{},{key:z(e,n,r,o+1+a)})}))}}))}))})}(e,t)}function z(e,t,n,r){return[e,t,n,r].join("-")}function J(e){return{type:G.SELECT_LEVEL,payload:{level:e}}}function X(){return{type:G.CLEAR_LEVEL}}function q(e){return e.selectedLevel}function $(e,t){return t<e.unlockedLevels}function Q(e){if(void 0!==e.selectedLevel){var t=e.selectedLevel+1;if(t in P())return t}}!function(e){e.SELECT_LEVEL="levels/SELECT_LEVEL",e.CLEAR_LEVEL="levels/CLEAR_LEVEL"}(G||(G={}));var Y={unlockedLevels:1};function Z(e){if(e.startsWith("/level/"))return parseInt(e.substr("/level/".length))}var ee,te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.b:var n=Z(t.payload.location.pathname);return void 0!==n?Object(O.d)(e,O.a.action(J(n))):e;case G.SELECT_LEVEL:var r=t.payload.level,o=K(r);return o&&$(e,r)?Object(O.d)(Object(S.a)(Object(S.a)({},e),{},{selectedLevel:r}),O.a.action(a.startLevel(o))):e;case G.CLEAR_LEVEL:return Object(S.a)(Object(S.a)({},e),{},{unlockedLevels:e.unlockedLevels+(e.selectedLevel===e.unlockedLevels-1?1:0)});default:return e}};function ne(e){return{type:ee.START_LEVEL,payload:{map:e}}}function re(){return{type:ee.FINISH_LEVEL}}function oe(){return{type:ee.MOVE_FORWARD}}function ae(){return{type:ee.MOVE_BACKWARD}}function ce(){return{type:ee.TURN_RIGHT}}function ie(){return{type:ee.TURN_LEFT}}function le(e){return{type:ee.MOVE,payload:e}}!function(e){e.START_LEVEL="game/START_LEVEL",e.FINISH_LEVEL="game/FINISH_LEVEL",e.MOVE="game/MOVE",e.MOVE_FORWARD="game/MOVE_FORWARD",e.MOVE_BACKWARD="game/MOVE_BACKWARD",e.TURN_RIGHT="game/TURN_RIGHT",e.TURN_LEFT="game/TURN_LEFT"}(ee||(ee={}));var se={finished:!1};function ue(e,t){var n=V(e.tiles,e.robot.position,t);return W.apply(void 0,Object(L.a)(n))}function he(e){je(e);var t=Object(T.a)(e.map.robot.position,2),n=t[0],r=t[1];return[n,r,e.map.tiles[n][r].height+e.map.tiles[n][r].objects.length+1]}function be(e){return je(e),e.map.robot.direction}function ge(e){return je(e),e.map.robot.key}function fe(e){return je(e),[e.map.width,e.map.height]}function me(e){je(e);for(var t=e.map.tiles,n=new Set(e.map.targets.map((function(e){return e.join("-")}))),r=[],o=0;o<t.length;o++)for(var a=0;a<t[o].length;a++){var c=t[o][a].height,i=n.has(o+"-"+a);r.push({x:o,y:a,height:c,hasTarget:i})}return r}function ve(e){je(e);for(var t=e.map.tiles,n=[],r=function(e){for(var r=function(r){var o=t[e][r].objects.map((function(n,o){return Object(S.a)(Object(S.a)({},n),{},{position:[e,r,t[e][r].height+o+1]})}));n.push.apply(n,Object(L.a)(o))},o=0;o<t[e].length;o++)r(o)},o=0;o<t.length;o++)r(o);return n}function de(e){return e.finished}function je(e){if(!e.map)throw Error("No map defined.")}var pe,Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;if(t.type===ee.START_LEVEL){var n=t.payload.map;return{finished:!1,map:n}}if(!e.map)return e;switch(t.type){case ee.MOVE_FORWARD:var o=e.map.robot.direction;return ue(e.map,o)?Object(O.d)(e,O.a.action(le(o))):e;case ee.MOVE_BACKWARD:var a=A(e.map.robot.direction);return ue(e.map,a)?Object(O.d)(e,O.a.action(le(a))):e;case ee.TURN_RIGHT:return Object(S.a)(Object(S.a)({},e),{},{map:Object(S.a)(Object(S.a)({},e.map),{},{robot:Object(S.a)(Object(S.a)({},e.map.robot),{},{direction:N(e.map.robot.direction)})})});case ee.TURN_LEFT:return Object(S.a)(Object(S.a)({},e),{},{map:Object(S.a)(Object(S.a)({},e.map),{},{robot:Object(S.a)(Object(S.a)({},e.map.robot),{},{direction:M(e.map.robot.direction)})})});case ee.MOVE:var c=Object(S.a)(Object(S.a)({},e),{},{map:Object(S.a)(Object(S.a)({},e.map),{},{tiles:D(e.map.tiles,e.map.robot.position,t.payload),robot:Object(S.a)(Object(S.a)({},e.map.robot),{},{position:_(e.map.robot.position,t.payload)})})});return H(c.map)?Object(O.d)(c,O.a.action(re())):c;case ee.FINISH_LEVEL:return Object(O.d)(Object(S.a)(Object(S.a)({},e),{},{finished:!0}),O.a.action(r.clearLevel()));default:return e}};!function(e){e.TOGGLE_ON_SCREEN_CONTROLS="settings/TOGGLE_ON_SCREEN_CONTROLS"}(pe||(pe={}));var Oe={onScreenControls:!0};function ye(){return{type:pe.TOGGLE_ON_SCREEN_CONTROLS}}function Le(e){return e.onScreenControls}var Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe.TOGGLE_ON_SCREEN_CONTROLS:return{onScreenControls:!e.onScreenControls};default:return t.type,e}};var Te,we=function(e){return Object(O.b)({game:Ee,levels:te,settings:Se,router:Object(y.b)(e)})};function ke(e,t){var n=new Map(Object.entries(e.getState()));e.subscribe((function(){var r=new Map(Object.entries(e.getState())),o=t.filter((function(e){return r.get(e)!==n.get(e)}));o.forEach((function(e){!function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(r){console.warn('Failed to persist the state of slice "'.concat(e,'"'),r)}}(e,r.get(e))})),o.length>0&&(n=r)}))}var Re=["levels","settings"],Ce=null!==(Te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)&&void 0!==Te?Te:E.c;var xe=n(8),_e=n(24),Ne=n(146),Me=n(147),Ae=n(134);var Ie=Object(xe.c)(null,(function(e){return{goBack:function(){return e(Object(B.c)())}}}))((function(e){var t=e.goBack;return g.a.createElement(Me.a,{icon:g.a.createElement(Ae.a,null),label:"Back",onClick:function(){return t()}})})),Ve=n(38),He=n(127),Ue=n(2);function We(){var e=Object(Ve.a)(["\n  text-align: center;\n"]);return We=function(){return e},e}var De=Ue.default.h1(We());var Ge=function(e){var t=e.title,n=e.children;return g.a.createElement(He.a,{width:"medium"},g.a.createElement("header",null,g.a.createElement(De,null,t)),g.a.createElement(He.a,{width:"medium",gap:"small",align:"stretch"},n))};var Be=Object(xe.c)((function(e){return{displayOnScreenControls:l.displayOnScreenControls(e.settings)}}),(function(e){return{toggleOnScreenControls:function(){return e(i.toggleOnScreenControls())}}}))((function(e){var t=e.displayOnScreenControls,n=e.toggleOnScreenControls;return g.a.createElement(Ge,{title:"Settings"},g.a.createElement(Ne.a,{label:"Display on-screen controls (required on devices without a keyboard)",checked:t,onChange:n}),g.a.createElement(Ie,null))})),Fe=n(135),Pe=n(136);var Ke=Object(xe.c)(null,(function(e){return{startGame:function(){return e(Object(B.e)("/select-level"))},openSettings:function(){return e(Object(B.e)("/settings"))}}}))((function(e){var t=e.startGame,n=e.openSettings;return g.a.createElement(Ge,{title:"Sokobot"},g.a.createElement(Me.a,{icon:g.a.createElement(Fe.a,null),label:"Start Game",onClick:t}),g.a.createElement(Me.a,{icon:g.a.createElement(Pe.a,null),label:"Settings",onClick:n}))})),ze=n(137),Je=n(138);var Xe=Object(xe.c)((function(e){return{isUnlocked:function(t){return o.isUnlocked(e.levels,t)}}}),(function(e){return{selectLevel:function(t){return e(Object(B.e)("/level/".concat(t)))}}}))((function(e){var t=e.isUnlocked,n=e.selectLevel;return g.a.createElement(Ge,{title:"Select Level"},P().map((function(e,r){return t(r)?g.a.createElement(Me.a,{key:r,label:e,icon:g.a.createElement(ze.a,null),onClick:function(){return n(r)}}):g.a.createElement(Me.a,{key:r,label:e,icon:g.a.createElement(Je.a,null),disabled:!0})})))})),qe=n(28),$e=n(4),Qe=n(96);var Ye=function(e){Object(b.useEffect)(e,[])};var Ze=function(e){var t=Object(b.useRef)(),n=t.current,r=void 0===n?e:function(e,t){var n=2*Math.PI,r=(t-e)%n;return r>Math.PI?e+r-n:r<-Math.PI?e+r+n:e+r}(n,e);return Object(b.useEffect)((function(){t.current=r})),r};var et=function(e){var t=Object(b.useRef)();return Object(b.useEffect)((function(){t.current=e})),t.current},tt=n(20),nt=n.n(tt),rt=n(31),ot=n(47);var at=function(e){var t=e.position,n=et(e);return Object(ot.c)({from:null!==n&&void 0!==n?n:e,to:function(){var r=Object(rt.a)(nt.a.mark((function r(o){return nt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n&&t[2]<n.position[2])){r.next=6;break}return r.next=3,o(Object(S.a)(Object(S.a)({},e),{},{position:[t[0],t[1],n.position[2]]}));case 3:return r.next=5,o(Object(S.a)(Object(S.a)({},e),{},{config:{duration:100}}));case 5:return r.abrupt("return");case 6:return r.next=8,o(e);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})};Object(qe.d)({OrbitControls:Qe.a});var ct=Object(xe.c)((function(e){return{initialPosition:function(){try{var t=c.getMapDimensions(e.game),n=Math.max(3,.7*Math.max.apply(Math,Object(L.a)(t)));return[n,n,n]}catch(r){}}()}}))((function(e){var t=e.initialPosition,n=Object(qe.f)(),r=n.camera,o=n.gl,a=Object(b.useRef)();return Ye((function(){var e;t&&((e=r.position).set.apply(e,Object(L.a)(t)),a.current&&a.current.update())})),g.a.createElement("orbitControls",{args:[r,o.domElement],maxPolarAngle:Math.PI/2,enablePan:!1,ref:a})})),it=n(125);var lt=function(e){var t=e.position,n=at({position:t});return g.a.createElement(it.a.mesh,Object.assign({},n,{castShadow:!0,receiveShadow:!0}),g.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),g.a.createElement("meshLambertMaterial",{attach:"material",color:11176004}))};var st=function(e){var t=e.x,n=e.y,r=e.height;return g.a.createElement("mesh",{position:[t,n,(1+r)/2],castShadow:!0,receiveShadow:!0},g.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,r]}),g.a.createElement("meshPhongMaterial",{attach:"material",color:5592405}))};var ut=Object(xe.c)((function(e){return{position:c.getRobotPosition(e.game),direction:(t=c.getRobotDirection(e.game),R[t].angle)};var t}))((function(e){var t=e.position,n=e.direction,r=Ze(n),o=at({position:t,rotation:[0,0,r]});return g.a.createElement(it.a.mesh,Object.assign({},o,{castShadow:!0,receiveShadow:!0}),g.a.createElement("coneBufferGeometry",{attach:"geometry",args:[.5,1,10]}),g.a.createElement("meshLambertMaterial",{attach:"material",color:6949887}))}));var ht=function(e){var t=e.x,n=e.y,r=e.height;return g.a.createElement("mesh",{position:[t,n,r+.51],receiveShadow:!0},g.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1,1]}),g.a.createElement("meshLambertMaterial",{attach:"material",color:65280}))};var bt=Object(xe.c)((function(e){return{mapDimensions:c.getMapDimensions(e.game),tilesInfo:c.getTilesInfo(e.game),movableObjectsInfo:c.getMovableObjectsInfo(e.game),robotKey:c.getRobotKey(e.game)}}))((function(e){var t=e.mapDimensions,n=e.tilesInfo,r=e.movableObjectsInfo,o=e.robotKey,a=Object(T.a)(t,2),c=a[0],i=a[1];return g.a.createElement("group",{position:[(1-c)/2,(1-i)/2,-.5]},g.a.createElement(ut,{key:o}),n.map((function(e){var t=e.x,n=e.y,r=e.height,o=e.hasTarget;return g.a.createElement(b.Fragment,{key:"".concat(t,"-").concat(n)},r>0&&g.a.createElement(st,{x:t,y:n,height:r}),o&&g.a.createElement(ht,{x:t,y:n,height:r}))})),r.map((function(e){var t=e.key,n=e.position;return g.a.createElement(lt,{key:t,position:n})})))}));var gt=function(){return g.a.createElement(xe.b.Consumer,null,(function(e){var t=e.store;return g.a.createElement(qe.a,{shadowMap:!0,style:{backgroundColor:"black",height:"100%",position:"absolute",top:0,left:0}},g.a.createElement(xe.a,{store:t},g.a.createElement(ct,null),g.a.createElement("group",{rotation:[-Math.PI/2,0,0]},!1,g.a.createElement("ambientLight",{intensity:.3}),g.a.createElement("spotLight",{color:new $e.Color("#fffda7"),castShadow:!0,intensity:.7,penumbra:1,decay:1,angle:Math.PI/8,position:[10,10,10],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),g.a.createElement(bt,null))))}))},ft=n(139),mt=n(140),vt=n(141),dt=n(142);function jt(){var e=Object(Ve.a)(["\n  position: fixed;\n  bottom: .5rem;\n  right: .5rem;\n  z-index: 1000;\n"]);return jt=function(){return e},e}var pt=Ue.default.div(jt());function Et(e){return g.a.createElement(Me.a,Object.assign({},e,{plain:!1,margin:"xxsmall"}))}var Ot=Object(xe.c)((function(e){return{displayOnScreenControls:l.displayOnScreenControls(e.settings)}}),(function(e){return{moveForward:function(){return e(a.moveForward())},moveBackward:function(){return e(a.moveBackward())},turnLeft:function(){return e(a.turnLeft())},turnRight:function(){return e(a.turnRight())}}}))((function(e){var t,n=e.displayOnScreenControls,r=e.moveForward,o=e.moveBackward,a=e.turnLeft,c=e.turnRight,i=(t={W:r,A:a,S:o,D:c},function(e){var n=e.key.toUpperCase();n in t&&t[n].call(null)});return Ye((function(){return window.addEventListener("keypress",i),function(){window.removeEventListener("keypress",i)}})),n?g.a.createElement(pt,null,g.a.createElement(He.a,{align:"center"},g.a.createElement(Et,{icon:g.a.createElement(ft.a,null),title:"Move forward (W)",onClick:r})),g.a.createElement(He.a,{direction:"row"},g.a.createElement(Et,{icon:g.a.createElement(mt.a,null),title:"Turn left (A)",onClick:a}),g.a.createElement(Et,{icon:g.a.createElement(vt.a,null),title:"Move backward (S)",onClick:o}),g.a.createElement(Et,{icon:g.a.createElement(dt.a,null),title:"Turn right (D)",onClick:c}))):null}));function yt(){var e=Object(Ve.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0.3);\n  border-radius: 1em;\n  h1 {\n    text-align: center;\n    line-height: 1.2em;\n  }\n"]);return yt=function(){return e},e}var Lt=Ue.default.div(yt());var St=Object(xe.c)((function(e){return{isLevelCleared:c.isLevelCleared(e.game),nextLevel:o.getNextLevel(e.levels)}}),(function(e){return{goToLevel:function(t){return e(Object(B.e)("/level/".concat(t)))},goToLevelSelection:function(){return e(Object(B.e)("/select-level"))}}}))((function(e){var t=e.isLevelCleared,n=e.nextLevel,r=e.goToLevel,o=e.goToLevelSelection,a=void 0===n?"Congratulations, you finished the game!":"Level Cleared";return t?g.a.createElement(Lt,null,g.a.createElement(He.a,{width:"medium",gap:"small",align:"stretch",pad:"small"},g.a.createElement("h1",null,a),void 0!==n&&g.a.createElement(Me.a,{label:"Go to next level",onClick:function(){return r(n)}}),g.a.createElement(Me.a,{label:"Back to level selection",onClick:o}))):null})),Tt=n(143);function wt(){var e=Object(Ve.a)(["\n  position: fixed;\n  top: .5rem;\n  left: .5rem;\n  z-index: 1000;\n"]);return wt=function(){return e},e}var kt=Ue.default.div(wt());var Rt=Object(xe.c)((function(e){return{level:o.getSelectedLevel(e.levels)}}),(function(e){return{restart:function(t){return e(r.selectLevel(t))}}}))((function(e){var t=e.level,n=e.restart;return g.a.createElement(kt,null,g.a.createElement(Me.a,{label:"Restart",icon:g.a.createElement(Tt.a,null),onClick:function(){return n(t)}}))}));var Ct=Object(xe.c)((function(e,t){var n=t.match,r=parseInt(n.params.level);return{levelName:P()[r],isUnlocked:o.isUnlocked(e.levels,r)}}))((function(e){var t=e.isUnlocked,n=e.levelName;return void 0!==n&&t?g.a.createElement(Ge,{title:n},g.a.createElement(gt,null),g.a.createElement(Ot,null),g.a.createElement(Rt,null),g.a.createElement(St,null)):g.a.createElement(_e.a,{to:"/select-level"})})),xt={global:{colors:{icon:{dark:"text"},brand:"#7D4CDB",control:"brand",text:"#aaa",background:"#000"},font:{family:"Arial"}}},_t=function(){var e=function(e){var t={};return e.forEach((function(e){try{var n=localStorage.getItem(e);n&&(t[e]=JSON.parse(n))}catch(r){console.warn('Failed to load the state of slice "'.concat(e,'"'),r)}})),t}(Re),t=Object(p.a)({basename:"sokobot-3d"}),n=Ce(Object(E.a)(Object(j.a)(t)),Object(O.c)()),r=(0,E.d)(we(t),e,n);return ke(r,Re),{store:r,history:t}}(),Nt=_t.store,Mt=_t.history;var At=function(){return g.a.createElement(xe.a,{store:Nt},g.a.createElement(y.a,{history:Mt},g.a.createElement(v.a,{full:!0,theme:xt},g.a.createElement(d.a,{align:"center"},g.a.createElement(_e.d,null,g.a.createElement(_e.b,{exact:!0,path:"/",component:Ke}),g.a.createElement(_e.b,{exact:!0,path:"/settings",component:Be}),g.a.createElement(_e.b,{exact:!0,path:"/select-level",component:Xe}),g.a.createElement(_e.b,{exact:!0,path:"/level/:level",component:Ct}),g.a.createElement(_e.b,{render:function(){return g.a.createElement(_e.a,{to:"/"})}}))))))},It=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Vt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}m.a.render(g.a.createElement(At,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sokobot-3d",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/sokobot-3d","/service-worker.js");It?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Vt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Vt(t,e)}))}}()}},[[103,1,2]]]);
//# sourceMappingURL=main.e3abd470.chunk.js.map