(this["webpackJsonpsokobot-3d"]=this["webpackJsonpsokobot-3d"]||[]).push([[0],{104:function(e,t,n){e.exports=n(127)},127:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"selectLevel",(function(){return K})),n.d(r,"clearLevel",(function(){return z}));var o={};n.r(o),n.d(o,"getSelectedLevel",(function(){return J})),n.d(o,"isUnlocked",(function(){return X}));var a={};n.r(a),n.d(a,"startLevel",(function(){return Z})),n.d(a,"finishLevel",(function(){return ee})),n.d(a,"moveForward",(function(){return te})),n.d(a,"moveBackward",(function(){return ne})),n.d(a,"turnRight",(function(){return re})),n.d(a,"turnLeft",(function(){return oe})),n.d(a,"move",(function(){return ae}));var c={};n.r(c),n.d(c,"getRobotPosition",(function(){return le})),n.d(c,"getRobotDirection",(function(){return ue})),n.d(c,"getRobotKey",(function(){return se})),n.d(c,"getMapDimensions",(function(){return he})),n.d(c,"getTilesInfo",(function(){return be})),n.d(c,"getMovableObjectsInfo",(function(){return ge}));var i,l,u,s=n(0),h=n.n(s),b=n(41),g=n.n(b),f=n(146),m=n(145),v=n(74),d=n(32),j=n(44),p=n(18),E=n(29),O=n(8),y=n(13),L=n(6),w=n(5);!function(e){e.NORTH="NORTH",e.EAST="EAST",e.SOUTH="SOUTH",e.WEST="WEST"}(u||(u={}));var T=Math.PI/2,k={NORTH:{dx:0,dy:1,angle:0},WEST:{dx:-1,dy:0,angle:T},SOUTH:{dx:0,dy:-1,angle:2*T},EAST:{dx:1,dy:0,angle:3*T}},S=(i={},Object(w.a)(i,u.NORTH,u.EAST),Object(w.a)(i,u.EAST,u.SOUTH),Object(w.a)(i,u.SOUTH,u.WEST),Object(w.a)(i,u.WEST,u.NORTH),i),R=(l={},Object(w.a)(l,u.NORTH,u.WEST),Object(w.a)(l,u.WEST,u.SOUTH),Object(w.a)(l,u.SOUTH,u.EAST),Object(w.a)(l,u.EAST,u.NORTH),l);function x(e,t){var n=Object(L.a)(e,2),r=n[0],o=n[1],a=k[t];return[r+a.dx,o+a.dy]}function _(e){return S[e]}function C(e){return R[e]}function M(e){return S[S[e]]}function A(e,t){var n=Object(L.a)(t,2),r=n[0],o=n[1];return e[r]?e[r][o]:void 0}var I=function(e,t,n){var r=x(t,n),o=x(r,n);return[A(e,t),A(e,r),A(e,o)]};var N=function(e){var t=function(e){return e.objects.some((function(e){return"box"===e.type}))};return!e.targets.some((function(n){var r=Object(L.a)(n,2),o=r[0],a=r[1];return!t(e.tiles[o][a])}))&&!e.tiles.some((function(n,r){return n.some((function(n,o){return t(n)&&!e.targets.some((function(e){var t=Object(L.a)(e,2),n=t[0],a=t[1];return n===r&&a===o}))}))}))};function V(e){return void 0!==e&&e.height>0}var H=function(e,t,n){if(!V(t))return!1;if(t.height>e.height+e.objects.length)return!1;var r=e.height+e.objects.length;if(t.objects.slice(r-t.height).length>0){if(!V(n))return!1;if(n.height+n.objects.length>r)return!1}return!0};var U=function(e,t,n){var r=x(t,n),o=Object(L.a)(t,2),a=o[0],c=o[1],i=Object(L.a)(r,2),l=i[0],u=i[1],s=x(r,n),h=Object(L.a)(s,2),b=h[0],g=h[1],f=e[a][c],m=f.height+f.objects.length;return e.map((function(t,n){return t.map((function(t,r){if(n===l&&r===u)return Object(y.a)({},t,{objects:t.objects.slice(0,m-t.height)});if(n===b&&r===g){var o=e[l][u];return Object(y.a)({},t,{objects:[].concat(Object(O.a)(t.objects),Object(O.a)(o.objects.slice(m-o.height)))})}return t}))}))};var W,B=n(20),F=[{height:3,width:3,targets:[[1,2]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[{type:"box"}]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[1,0],direction:u.NORTH}},{height:4,width:5,targets:[[0,1],[4,0]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[{type:"box"}]},{height:0,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[{type:"box"}]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:0,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[2,0],direction:u.NORTH}},{height:5,width:5,targets:[[0,0],[4,4]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:0,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:2,objects:[]},{height:2,objects:[]},{height:1,objects:[{type:"box"},{type:"box"}]},{height:1,objects:[]}],[{height:1,objects:[]},{height:2,objects:[]},{height:2,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[2,2],direction:u.NORTH}},{height:3,width:5,targets:[[0,2],[4,2]],tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[{type:"box"}]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],robot:{position:[2,0],direction:u.NORTH}},{height:6,width:5,tiles:[[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]},{height:1,objects:[]},{height:2,objects:[]},{height:2,objects:[]}],[{height:2,objects:[]},{height:2,objects:[{type:"box"}]},{height:1,objects:[]},{height:1,objects:[]},{height:2,objects:[{type:"box"}]},{height:2,objects:[]}],[{height:2,objects:[]},{height:2,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:2,objects:[{type:"box"}]},{height:2,objects:[]}],[{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]},{height:1,objects:[]}]],targets:[[0,2],[0,3],[4,0],[4,5]],robot:{position:[2,0],direction:u.NORTH}}];function D(){return F.map((function(e,t){return"Level ".concat(t+1)}))}function P(e){var t=F[e];if(t)return function(e,t){var n=Object(L.a)(t.robot.position,2),r=n[0],o=n[1],a=t.tiles[r][o],c=a.height+a.objects.length;return Object(y.a)({},t,{robot:Object(y.a)({},t.robot,{key:G(e,r,o,c)}),tiles:t.tiles.map((function(t,n){return t.map((function(t,r){var o=t.height,a=t.objects;return{height:o,objects:a.map((function(t,a){return Object(y.a)({},t,{key:G(e,n,r,o+1+a)})}))}}))}))})}(e,t)}function G(e,t,n,r){return[e,t,n,r].join("-")}function K(e){return{type:W.SELECT_LEVEL,payload:{level:e}}}function z(){return{type:W.CLEAR_LEVEL}}function J(e){return e.selectedLevel}function X(e,t){return t<e.unlockedLevels}!function(e){e.SELECT_LEVEL="levels/SELECT_LEVEL",e.CLEAR_LEVEL="levels/CLEAR_LEVEL"}(W||(W={}));var $={unlockedLevels:1};function q(e){if(e.startsWith("/level/"))return parseInt(e.substr("/level/".length))}var Q,Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.b:var n=q(t.payload.location.pathname);return void 0!==n?Object(p.d)(e,p.a.action(K(n))):e;case W.SELECT_LEVEL:var r=t.payload.level,o=P(r);return o&&X(e,r)?Object(p.d)(Object(y.a)({},e,{selectedLevel:r}),p.a.action(a.startLevel(o))):e;case W.CLEAR_LEVEL:return{unlockedLevels:e.unlockedLevels+(e.selectedLevel===e.unlockedLevels-1?1:0)};default:return e}};function Z(e){return{type:Q.START_LEVEL,payload:{map:e}}}function ee(){return{type:Q.FINISH_LEVEL}}function te(){return{type:Q.MOVE_FORWARD}}function ne(){return{type:Q.MOVE_BACKWARD}}function re(){return{type:Q.TURN_RIGHT}}function oe(){return{type:Q.TURN_LEFT}}function ae(e){return{type:Q.MOVE,payload:e}}!function(e){e.START_LEVEL="game/START_LEVEL",e.FINISH_LEVEL="game/FINISH_LEVEL",e.MOVE="game/MOVE",e.MOVE_FORWARD="game/MOVE_FORWARD",e.MOVE_BACKWARD="game/MOVE_BACKWARD",e.TURN_RIGHT="game/TURN_RIGHT",e.TURN_LEFT="game/TURN_LEFT"}(Q||(Q={}));var ce={finished:!1};function ie(e,t){var n=I(e.tiles,e.robot.position,t);return H.apply(void 0,Object(O.a)(n))}function le(e){fe(e);var t=Object(L.a)(e.map.robot.position,2),n=t[0],r=t[1];return[n,r,e.map.tiles[n][r].height+e.map.tiles[n][r].objects.length+1]}function ue(e){return fe(e),e.map.robot.direction}function se(e){return fe(e),e.map.robot.key}function he(e){return fe(e),[e.map.width,e.map.height]}function be(e){fe(e);for(var t=e.map.tiles,n=new Set(e.map.targets.map((function(e){return e.join("-")}))),r=[],o=0;o<t.length;o++)for(var a=0;a<t[o].length;a++){var c=t[o][a].height,i=n.has(o+"-"+a);r.push({x:o,y:a,height:c,hasTarget:i})}return r}function ge(e){fe(e);for(var t=e.map.tiles,n=[],r=function(e){for(var r=function(r){var o=t[e][r].objects.map((function(n,o){return Object(y.a)({},n,{position:[e,r,t[e][r].height+o+1]})}));n.push.apply(n,Object(O.a)(o))},o=0;o<t[e].length;o++)r(o)},o=0;o<t.length;o++)r(o);return n}function fe(e){if(!e.map)throw Error("No map defined.")}var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;if(t.type===Q.START_LEVEL){var n=t.payload.map;return{finished:!1,map:n}}if(!e.map)return e;switch(t.type){case Q.MOVE_FORWARD:var o=e.map.robot.direction;return ie(e.map,o)?Object(p.d)(e,p.a.action(ae(o))):e;case Q.MOVE_BACKWARD:var a=M(e.map.robot.direction);return ie(e.map,a)?Object(p.d)(e,p.a.action(ae(a))):e;case Q.TURN_RIGHT:return Object(y.a)({},e,{map:Object(y.a)({},e.map,{robot:Object(y.a)({},e.map.robot,{direction:_(e.map.robot.direction)})})});case Q.TURN_LEFT:return Object(y.a)({},e,{map:Object(y.a)({},e.map,{robot:Object(y.a)({},e.map.robot,{direction:C(e.map.robot.direction)})})});case Q.MOVE:var c=Object(y.a)({},e,{map:Object(y.a)({},e.map,{tiles:U(e.map.tiles,e.map.robot.position,t.payload),robot:Object(y.a)({},e.map.robot,{position:x(e.map.robot.position,t.payload)})})});return N(c.map)?Object(p.d)(c,p.a.action(ee())):c;case Q.FINISH_LEVEL:return Object(p.d)(Object(y.a)({},e,{finished:!0}),p.a.action(r.clearLevel()));default:return e}};var ve,de=function(e){return Object(p.b)({game:me,levels:Y,router:Object(E.b)(e)})};function je(e,t){var n=new Map(Object.entries(e.getState()));e.subscribe((function(){var r=new Map(Object.entries(e.getState())),o=t.filter((function(e){return r.get(e)!==n.get(e)}));o.forEach((function(e){!function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(r){console.warn('Failed to persist the state of slice "'.concat(e,'"'),r)}}(e,r.get(e))})),o.length>0&&(n=r)}))}var pe=["levels"],Ee=null!==(ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)&&void 0!==ve?ve:j.c;var Oe=n(7),ye=n(23),Le=n(147),we=n(135);var Te=Object(Oe.c)(null,(function(e){return{goBack:function(){return e(Object(B.c)())}}}))((function(e){var t=e.goBack;return h.a.createElement(Le.a,{icon:h.a.createElement(we.a,null),label:"Back",onClick:function(){return t()}})})),ke=n(37),Se=n(128),Re=n(2);function xe(){var e=Object(ke.a)(["\n  text-align: center;\n"]);return xe=function(){return e},e}var _e=Re.default.h1(xe());var Ce=function(e){var t=e.title,n=e.children;return h.a.createElement(Se.a,{width:"medium"},h.a.createElement("header",null,h.a.createElement(_e,null,t)),h.a.createElement(Se.a,{width:"medium",gap:"small",align:"stretch"},n))};var Me=function(){return h.a.createElement(Ce,{title:"Settings"},h.a.createElement(Te,null))},Ae=n(136),Ie=n(137);var Ne=Object(Oe.c)(null,(function(e){return{startGame:function(){return e(Object(B.e)("/select-level"))},openSettings:function(){return e(Object(B.e)("/settings"))}}}))((function(e){var t=e.startGame,n=e.openSettings;return h.a.createElement(Ce,{title:"Sokobot"},h.a.createElement(Le.a,{icon:h.a.createElement(Ae.a,null),label:"Start Game",onClick:t}),h.a.createElement(Le.a,{icon:h.a.createElement(Ie.a,null),label:"Settings",onClick:n}))})),Ve=n(138),He=n(139);var Ue=Object(Oe.c)((function(e){return{isUnlocked:function(t){return o.isUnlocked(e.levels,t)}}}),(function(e){return{selectLevel:function(t){return e(Object(B.e)("/level/".concat(t)))}}}))((function(e){var t=e.isUnlocked,n=e.selectLevel;return h.a.createElement(Ce,{title:"Select Level"},D().map((function(e,r){return t(r)?h.a.createElement(Le.a,{key:r,label:e,icon:h.a.createElement(Ve.a,null),onClick:function(){return n(r)}}):h.a.createElement(Le.a,{key:r,label:e,icon:h.a.createElement(He.a,null),disabled:!0})})))})),We=n(28),Be=n(4),Fe=n(95);var De=function(e){Object(s.useEffect)(e,[])};var Pe=function(e){var t=Object(s.useRef)(),n=t.current,r=void 0===n?e:function(e,t){var n=2*Math.PI,r=(t-e)%n;return r>Math.PI?e+r-n:r<-Math.PI?e+r+n:e+r}(n,e);return Object(s.useEffect)((function(){t.current=r})),r};var Ge=function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){t.current=e})),t.current},Ke=n(19),ze=n.n(Ke),Je=n(31),Xe=n(46);var $e=function(e){var t=e.position,n=Ge(e);return Object(Xe.c)({from:null!==n&&void 0!==n?n:e,to:function(){var r=Object(Je.a)(ze.a.mark((function r(o){return ze.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n&&t[2]<n.position[2])){r.next=6;break}return r.next=3,o(Object(y.a)({},e,{position:[t[0],t[1],n.position[2]]}));case 3:return r.next=5,o(Object(y.a)({},e,{config:{duration:100}}));case 5:return r.abrupt("return");case 6:return r.next=8,o(e);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})};Object(We.d)({OrbitControls:Fe.a});var qe=Object(Oe.c)((function(e){return{initialPosition:function(){try{var t=c.getMapDimensions(e.game),n=Math.max(3,.7*Math.max.apply(Math,Object(O.a)(t)));return[n,n,n]}catch(r){}}()}}))((function(e){var t=e.initialPosition,n=Object(We.f)(),r=n.camera,o=n.gl,a=Object(s.useRef)();return De((function(){var e;t&&((e=r.position).set.apply(e,Object(O.a)(t)),a.current&&a.current.update())})),h.a.createElement("orbitControls",{args:[r,o.domElement],maxPolarAngle:Math.PI/2,enablePan:!1,ref:a})})),Qe=n(126);var Ye=function(e){var t=e.position,n=$e({position:t});return h.a.createElement(Qe.a.mesh,Object.assign({},n,{castShadow:!0,receiveShadow:!0}),h.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),h.a.createElement("meshLambertMaterial",{attach:"material",color:11176004}))};var Ze=function(e){var t=e.x,n=e.y,r=e.height;return h.a.createElement("mesh",{position:[t,n,(1+r)/2],castShadow:!0,receiveShadow:!0},h.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,r]}),h.a.createElement("meshPhongMaterial",{attach:"material",color:5592405}))},et=n(101);var tt=Object(Oe.c)((function(e){return{position:c.getRobotPosition(e.game),direction:(t=c.getRobotDirection(e.game),k[t].angle)};var t}),(function(e){return{moveForward:function(){return e(a.moveForward())},moveBackward:function(){return e(a.moveBackward())},turnRight:function(){return e(a.turnRight())},turnLeft:function(){return e(a.turnLeft())}}}))((function(e){var t=e.position,n=e.direction,r=Object(et.a)(e,["position","direction"]);function o(e){switch(e.key){case"w":r.moveForward();break;case"d":r.turnRight();break;case"s":r.moveBackward();break;case"a":r.turnLeft()}}De((function(){return window.addEventListener("keypress",o),function(){window.removeEventListener("keypress",o)}}));var a=Pe(n),c=$e({position:t,rotation:[0,0,a]});return h.a.createElement(Qe.a.mesh,Object.assign({},c,{castShadow:!0,receiveShadow:!0}),h.a.createElement("coneBufferGeometry",{attach:"geometry",args:[.5,1,10]}),h.a.createElement("meshLambertMaterial",{attach:"material",color:6949887}))}));var nt=function(e){var t=e.x,n=e.y,r=e.height;return h.a.createElement("mesh",{position:[t,n,r+.51],receiveShadow:!0},h.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1,1]}),h.a.createElement("meshLambertMaterial",{attach:"material",color:65280}))};var rt=Object(Oe.c)((function(e){return{mapDimensions:c.getMapDimensions(e.game),tilesInfo:c.getTilesInfo(e.game),movableObjectsInfo:c.getMovableObjectsInfo(e.game),robotKey:c.getRobotKey(e.game)}}))((function(e){var t=e.mapDimensions,n=e.tilesInfo,r=e.movableObjectsInfo,o=e.robotKey,a=Object(L.a)(t,2),c=a[0],i=a[1];return h.a.createElement("group",{position:[(1-c)/2,(1-i)/2,-.5]},h.a.createElement(tt,{key:o}),n.map((function(e){var t=e.x,n=e.y,r=e.height,o=e.hasTarget;return h.a.createElement(s.Fragment,{key:"".concat(t,"-").concat(n)},r>0&&h.a.createElement(Ze,{x:t,y:n,height:r}),o&&h.a.createElement(nt,{x:t,y:n,height:r}))})),r.map((function(e){var t=e.key,n=e.position;return h.a.createElement(Ye,{key:t,position:n})})))}));var ot=function(){return h.a.createElement(Oe.b.Consumer,null,(function(e){var t=e.store;return h.a.createElement(We.a,{shadowMap:!0,style:{backgroundColor:"black",height:"100%",position:"absolute",top:0,left:0}},h.a.createElement(Oe.a,{store:t},h.a.createElement(qe,null),h.a.createElement("group",{rotation:[-Math.PI/2,0,0]},!1,h.a.createElement("ambientLight",{intensity:.3}),h.a.createElement("spotLight",{color:new Be.Color("#fffda7"),castShadow:!0,intensity:.7,penumbra:1,decay:1,angle:Math.PI/8,position:[10,10,10],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),h.a.createElement(rt,null))))}))},at=n(140),ct=n(141),it=n(142),lt=n(143);function ut(){var e=Object(ke.a)(["\n  position: fixed;\n  bottom: .5rem;\n  right: .5rem;\n  z-index: 1000;\n"]);return ut=function(){return e},e}var st=Re.default.div(ut());function ht(e){return h.a.createElement(Le.a,Object.assign({},e,{plain:!1,margin:"xxsmall"}))}var bt=Object(Oe.c)(null,(function(e){return{moveForward:function(){return e(a.moveForward())},moveBackward:function(){return e(a.moveBackward())},turnLeft:function(){return e(a.turnLeft())},turnRight:function(){return e(a.turnRight())}}}))((function(e){var t=e.moveForward,n=e.moveBackward,r=e.turnLeft,o=e.turnRight;return h.a.createElement(st,null,h.a.createElement(Se.a,{align:"center"},h.a.createElement(ht,{icon:h.a.createElement(at.a,null),title:"Move forward",onClick:t})),h.a.createElement(Se.a,{direction:"row"},h.a.createElement(ht,{icon:h.a.createElement(ct.a,null),title:"Turn left",onClick:r}),h.a.createElement(ht,{icon:h.a.createElement(it.a,null),title:"Move backward",onClick:n}),h.a.createElement(ht,{icon:h.a.createElement(lt.a,null),title:"Turn right",onClick:o})))}));function gt(){var e=Object(ke.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0.3);\n  border-radius: 1em;\n  h1 {\n    text-align: center;\n  }\n"]);return gt=function(){return e},e}var ft=Re.default.div(gt());var mt=Object(Oe.c)((function(e){return{isLevelCleared:e.game.finished}}),(function(e){return{goToLevel:function(t){return e(Object(B.e)("/level/".concat(t)))},goToLevelSelection:function(){return e(Object(B.e)("/select-level"))}}}))((function(e){var t=e.isLevelCleared,n=e.nextLevel,r=e.goToLevel,o=e.goToLevelSelection;return t?h.a.createElement(ft,null,h.a.createElement(Se.a,{width:"medium",gap:"small",align:"stretch",pad:"small"},h.a.createElement("h1",null,n?"Level Cleared":"Game Cleared"),void 0!==n&&h.a.createElement(Le.a,{label:"Go to next level",onClick:function(){return r(n)}}),h.a.createElement(Le.a,{label:"Back to level selection",onClick:o}))):null})),vt=n(144);function dt(){var e=Object(ke.a)(["\n  position: fixed;\n  top: .5rem;\n  left: .5rem;\n  z-index: 1000;\n"]);return dt=function(){return e},e}var jt=Re.default.div(dt());var pt=Object(Oe.c)((function(e){return{level:o.getSelectedLevel(e.levels)}}),(function(e){return{restart:function(t){return e(r.selectLevel(t))}}}))((function(e){var t=e.level,n=e.restart;return h.a.createElement(jt,null,h.a.createElement(Le.a,{label:"Restart",icon:h.a.createElement(vt.a,null),onClick:function(){return n(t)}}))}));var Et=Object(Oe.c)((function(e){return{isUnlocked:function(t){return o.isUnlocked(e.levels,t)}}}))((function(e){var t=e.match,n=e.isUnlocked,r=+t.params.level,o=D()[r],a=P(r+1)?r+1:void 0;return void 0!==o&&n(r)?h.a.createElement(Ce,{title:o},h.a.createElement(ot,null),h.a.createElement(bt,null),h.a.createElement(pt,null),h.a.createElement(mt,{nextLevel:a})):h.a.createElement(ye.a,{to:"/select-level"})})),Ot={global:{colors:{icon:{dark:"text"},brand:"#7D4CDB",control:"brand",text:"#aaa",background:"#000"},font:{family:"Arial"}}},yt=function(){var e=function(e){var t={};return e.forEach((function(e){try{var n=localStorage.getItem(e);n&&(t[e]=JSON.parse(n))}catch(r){console.warn('Failed to load the state of slice "'.concat(e,'"'),r)}})),t}(pe),t=Object(d.a)({basename:"sokobot-3d"}),n=Ee(Object(j.a)(Object(v.a)(t)),Object(p.c)()),r=(0,j.d)(de(t),e,n);return je(r,pe),{store:r,history:t}}(),Lt=yt.store,wt=yt.history;var Tt=function(){return h.a.createElement(Oe.a,{store:Lt},h.a.createElement(E.a,{history:wt},h.a.createElement(f.a,{full:!0,theme:Ot},h.a.createElement(m.a,{align:"center"},h.a.createElement(ye.d,null,h.a.createElement(ye.b,{exact:!0,path:"/",component:Ne}),h.a.createElement(ye.b,{exact:!0,path:"/settings",component:Me}),h.a.createElement(ye.b,{exact:!0,path:"/select-level",component:Ue}),h.a.createElement(ye.b,{exact:!0,path:"/level/:level",component:Et}),h.a.createElement(ye.b,{render:function(){return h.a.createElement(ye.a,{to:"/"})}}))))))},kt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function St(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}g.a.render(h.a.createElement(Tt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sokobot-3d",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/sokobot-3d","/service-worker.js");kt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):St(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):St(t,e)}))}}()}},[[104,1,2]]]);
//# sourceMappingURL=main.e5ddaa99.chunk.js.map